<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Body Shape Analysis - SkinCare</title>
    <link rel="stylesheet" href="modern-styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        /* Body Shape specific styles */
        .body-hero {
            background: var(--gradient-background);
            padding: var(--space-3xl) 0;
            text-align: center;
        }
        
        .body-hero-content {
            max-width: 800px;
            margin: 0 auto;
            padding: 0 var(--space-lg);
        }
        
        .body-hero-title {
            font-size: 3rem;
            font-weight: 800;
            margin-bottom: var(--space-lg);
            background: var(--gradient-primary);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .body-hero-description {
            font-size: 1.125rem;
            color: var(--text-secondary);
            margin-bottom: var(--space-xl);
            line-height: 1.7;
        }
        
        .calculator-section {
            max-width: 1200px;
            margin: var(--space-3xl) auto;
            padding: 0 var(--space-lg);
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: var(--space-3xl);
            align-items: start;
        }
        
        .calculator-card {
            background: var(--surface);
            border: 1px solid var(--border);
            border-radius: var(--radius-2xl);
            padding: var(--space-3xl);
            box-shadow: var(--shadow-lg);
        }
        
        .calculator-title {
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: var(--space-lg);
            color: var(--text-primary);
            text-align: center;
        }
        
        .calculator-form {
            display: flex;
            flex-direction: column;
            gap: var(--space-lg);
        }
        
        .form-input {
            height: 56px;
            padding: 0 var(--space-lg);
            border: 2px solid var(--border);
            border-radius: var(--radius-lg);
            background: var(--surface);
            color: var(--text-primary);
            font-size: 1rem;
            transition: all var(--transition);
            outline: none;
        }
        
        .form-input:focus {
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(255, 107, 157, 0.1);
        }
        
        .form-input::placeholder {
            color: var(--text-muted);
        }
        
        .calculate-btn {
            background: var(--gradient-primary);
            color: white;
            border: none;
            padding: var(--space-lg) var(--space-xl);
            border-radius: var(--radius-lg);
            font-size: 1.125rem;
            font-weight: 600;
            cursor: pointer;
            transition: all var(--transition);
            box-shadow: var(--shadow);
        }
        
        .calculate-btn:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
        }
        
        .result-message {
            margin-top: var(--space-lg);
            padding: var(--space-lg);
            background: rgba(255, 107, 157, 0.1);
            border: 1px solid rgba(255, 107, 157, 0.2);
            border-radius: var(--radius-lg);
            font-weight: 600;
            color: var(--primary);
            text-align: center;
            display: none;
        }

        .result-message.show {
            display: block;
            animation: slideInUp 0.3s ease-out;
        }

        .result-content {
            display: flex;
            flex-direction: column;
            gap: var(--space-lg);
            align-items: center;
        }

        .result-title {
            font-size: 1.5rem;
            font-weight: 800;
            color: var(--primary);
            margin-bottom: var(--space-lg);
            text-align: center;
            background: var(--gradient-primary);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .result-images {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: var(--space-lg);
            width: 100%;
            max-width: 800px;
        }

        .result-image-card {
            background: var(--surface);
            border: 1px solid var(--border);
            border-radius: var(--radius-lg);
            overflow: hidden;
            box-shadow: var(--shadow);
            transition: all var(--transition);
        }

        .result-image-card:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
        }

        .result-image {
            width: 100%;
            height: 200px;
            object-fit: cover;
            border-bottom: 1px solid var(--border);
        }

        .result-image-label {
            padding: var(--space-md);
            font-weight: 600;
            color: var(--text-primary);
            text-align: center;
            font-size: 0.9rem;
            text-transform: capitalize;
        }

        .result-image-error {
            display: flex;
            align-items: center;
            justify-content: center;
            height: 200px;
            background: var(--surface-hover);
            color: var(--text-muted);
            font-size: 0.9rem;
            border-bottom: 1px solid var(--border);
        }

        .result-loading {
            display: flex;
            align-items: center;
            justify-content: center;
            height: 200px;
            background: var(--surface-hover);
            color: var(--text-muted);
            font-size: 0.9rem;
        }

        .result-loading::after {
            content: '';
            width: 20px;
            height: 20px;
            border: 2px solid var(--border);
            border-top: 2px solid var(--primary);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-left: var(--space-sm);
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        @keyframes slideInUp {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .instructions-card {
            background: var(--surface-hover);
            border: 1px solid var(--border);
            border-radius: var(--radius-lg);
            padding: var(--space-lg);
            margin-top: var(--space-lg);
        }
        
        .instructions-title {
            font-weight: 700;
            margin-bottom: var(--space-md);
            color: var(--text-primary);
        }
        
        .instructions-text {
            color: var(--text-secondary);
            line-height: 1.6;
            font-size: 0.9rem;
        }
        
        .body-shapes-section {
            max-width: 1200px;
            margin: var(--space-3xl) auto;
            padding: 0 var(--space-lg);
        }
        
        .body-shapes-title {
            font-size: 2rem;
            font-weight: 800;
            text-align: center;
            margin-bottom: var(--space-lg);
            color: var(--text-primary);
        }
        
        .body-shapes-subtitle {
            text-align: center;
            color: var(--text-secondary);
            margin-bottom: var(--space-3xl);
            font-size: 1.125rem;
        }
        
        .body-shapes-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: var(--space-xl);
            margin-bottom: var(--space-3xl);
        }
        
        .shape-card {
            background: var(--surface);
            border: 1px solid var(--border);
            border-radius: var(--radius-xl);
            overflow: hidden;
            box-shadow: var(--shadow);
            transition: all var(--transition);
            cursor: pointer;
        }
        
        .shape-card:hover {
            transform: translateY(-4px);
            box-shadow: var(--shadow-lg);
            border-color: var(--primary);
        }
        
        .shape-image {
            width: 100%;
            height: 200px;
            object-fit: cover;
            background: var(--surface-hover);
        }
        
        .shape-content {
            padding: var(--space-xl);
        }
        
        .shape-title {
            font-size: 1.25rem;
            font-weight: 700;
            margin-bottom: var(--space-md);
            color: var(--primary);
        }
        
        .shape-description {
            color: var(--text-secondary);
            line-height: 1.6;
        }
        
        .info-section {
            background: var(--surface);
            border: 1px solid var(--border);
            border-radius: var(--radius-2xl);
            padding: var(--space-3xl);
            box-shadow: var(--shadow);
        }
        
        .info-title {
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: var(--space-lg);
            color: var(--text-primary);
        }
        
        .info-description {
            color: var(--text-secondary);
            line-height: 1.7;
            margin-bottom: var(--space-xl);
        }
        
        .shape-formulas {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: var(--space-lg);
        }

        .formula-item {
            background: var(--surface-hover);
            border-radius: var(--radius-lg);
            padding: var(--space-lg);
            border: 1px solid var(--border);
        }

        .formula-title {
            font-weight: 700;
            color: var(--primary);
            margin-bottom: var(--space-sm);
        }

        .formula-text {
            color: var(--text-secondary);
            font-size: 0.9rem;
            font-family: var(--font-mono);
        }

        /* Detailed Body Shape Cards */
        .detailed-shapes-section {
            max-width: 1200px;
            margin: var(--space-3xl) auto;
            padding: 0 var(--space-lg);
        }

        .detailed-shapes-title {
            font-size: 2rem;
            font-weight: 800;
            text-align: center;
            margin-bottom: var(--space-xl);
            color: var(--text-primary);
        }

        .detailed-shapes-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: var(--space-xl);
        }

        .detailed-shape-card {
            background: var(--surface);
            border: 1px solid var(--border);
            border-radius: var(--radius-2xl);
            overflow: hidden;
            box-shadow: var(--shadow-lg);
            transition: all var(--transition);
            position: relative;
        }

        .detailed-shape-card:hover {
            transform: translateY(-8px);
            box-shadow: var(--shadow-xl);
            border-color: var(--primary);
        }

        .detailed-shape-header {
            background: var(--gradient-primary);
            color: white;
            padding: var(--space-xl);
            text-align: center;
            position: relative;
        }

        .detailed-shape-header::after {
            content: '';
            position: absolute;
            bottom: -10px;
            left: 50%;
            transform: translateX(-50%);
            width: 0;
            height: 0;
            border-left: 15px solid transparent;
            border-right: 15px solid transparent;
            border-top: 10px solid var(--primary);
        }

        .detailed-shape-name {
            font-size: 1.5rem;
            font-weight: 800;
            margin-bottom: var(--space-sm);
        }

        .detailed-shape-summary {
            font-size: 0.95rem;
            opacity: 0.9;
            line-height: 1.5;
        }

        .detailed-shape-content {
            padding: var(--space-xl);
        }

        .shape-section {
            margin-bottom: var(--space-lg);
        }

        .shape-section:last-child {
            margin-bottom: 0;
        }

        .shape-section-title {
            font-size: 1rem;
            font-weight: 700;
            color: var(--primary);
            margin-bottom: var(--space-md);
            display: flex;
            align-items: center;
            gap: var(--space-sm);
        }

        .shape-section-title::before {
            content: '';
            width: 4px;
            height: 16px;
            background: var(--gradient-primary);
            border-radius: 2px;
        }

        .shape-section-content {
            color: var(--text-secondary);
            line-height: 1.6;
            font-size: 0.9rem;
        }

        .shape-tips-list {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .shape-tips-list li {
            padding: var(--space-sm) 0;
            border-bottom: 1px solid var(--border);
            position: relative;
            padding-left: var(--space-lg);
        }

        .shape-tips-list li:last-child {
            border-bottom: none;
        }

        .shape-tips-list li::before {
            content: '✓';
            position: absolute;
            left: 0;
            top: var(--space-sm);
            color: var(--primary);
            font-weight: bold;
        }

        .shape-highlight {
            background: rgba(255, 107, 157, 0.1);
            padding: var(--space-md);
            border-radius: var(--radius-lg);
            border-left: 4px solid var(--primary);
            margin: var(--space-md) 0;
        }

        .shape-highlight-title {
            font-weight: 700;
            color: var(--primary);
            margin-bottom: var(--space-sm);
        }

        @media (max-width: 768px) {
            .body-hero-title {
                font-size: 2rem;
            }

            .calculator-section {
                grid-template-columns: 1fr;
                gap: var(--space-xl);
            }

            .body-shapes-grid {
                grid-template-columns: 1fr;
            }

            .detailed-shapes-grid {
                grid-template-columns: 1fr;
            }

            .detailed-shape-header {
                padding: var(--space-lg);
            }

            .detailed-shape-name {
                font-size: 1.25rem;
            }

            .detailed-shape-content {
                padding: var(--space-lg);
            }

            .shape-formulas {
                grid-template-columns: 1fr;
            }

            .result-images {
                grid-template-columns: 1fr;
            }

            .result-image {
                height: 150px;
            }
        }
    </style>
</head>
<body>
    <!-- Modern Navigation Bar -->
    <nav class="modern-nav">
        <div class="nav-container">
            <div class="nav-brand" style="display: flex;">
                <img src="Pics/logo2.png" alt="" style="width: 50px; margin-right: 10px; border-radius: 50%; object-fit: cover;">
                <h1 class="brand-logo" style="font-family:monospace; margin-top: 5px;">InsightCare</h1>
            </div>
            
            <div class="nav-links">
                <a href="index.html" class="nav-link">Home</a>
                <div class="nav-dropdown">
                    <a href="#" class="nav-link dropdown-trigger active">
                        Services
                        <svg class="dropdown-arrow" width="16" height="16" viewBox="0 0 24 24" fill="none">
                            <path d="m6 9 6 6 6-6" stroke="currentColor" stroke-width="2"/>
                        </svg>
                    </a>
                    <div class="nav-dropdown-menu">
                        <a href="bodyShape.html" class="dropdown-item active">Body Shape Analysis</a>
                        <a href="colorAnalysis.html" class="dropdown-item">Color Analysis</a>
                        <a href="hairTest.html" class="dropdown-item">Hair Test</a>
                        <a href="skin.html" class="dropdown-item">Skin Test</a>
                        <a href="skinTone.html" class="dropdown-item">Skin Tone Test</a>
                        <a href="treatment.html" class="dropdown-item">Treatments</a>
                    </div>
                </div>
                <a href="clinic.html" class="nav-link">Clinics</a>
                <a href="bookingList.html" class="nav-link">Bookings</a>
            </div>
            
            <!-- Mobile Navigation Toggle -->
            <button class="mobile-nav-toggle" aria-label="Toggle mobile menu">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                    <path d="M3 12h18M3 6h18M3 18h18" stroke="currentColor" stroke-width="2"/>
                </svg>
            </button>
            
            <div class="nav-actions">
                <!-- Notification Bell -->
                <div class="notification-container">
                    <button class="notification-btn" aria-label="Notifications" id="notification-btn">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                            <path d="M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9" stroke="currentColor" stroke-width="2"/>
                            <path d="M13.73 21a2 2 0 0 1-3.46 0" stroke="currentColor" stroke-width="2"/>
                        </svg>
                        <span class="notification-badge" id="notification-badge">0</span>
                    </button>
                    
                    <!-- Notification Dropdown -->
                    <div class="notification-dropdown" id="notification-dropdown">
                        <div class="notification-header">
                            <h3>Notifications</h3>
                            <button class="clear-all-btn" id="clear-all-btn">Clear All</button>
                        </div>
                        <div class="notification-list" id="nav-notification-list">
                            <div class="empty-notifications" id="nav-empty-notifications">
                                <div class="empty-icon">
                                    <svg width="48" height="48" viewBox="0 0 24 24" fill="none">
                                        <path d="M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9" stroke="currentColor" stroke-width="2"/>
                                        <path d="M13.73 21a2 2 0 0 1-3.46 0" stroke="currentColor" stroke-width="2"/>
                                    </svg>
                                </div>
                                <p>No notifications yet</p>
                            </div>
                        </div>
                        <div class="notification-footer">
                            <button class="view-all-btn" onclick="window.location.href='myProfile.html#notifications-section'">View All</button>
                        </div>
                    </div>
                </div>
                
                <div class="profile-container">
                    <button class="profile-btn" aria-label="User profile menu">
                        <span class="profile-name">Guest</span>
                        <svg class="dropdown-arrow" width="16" height="16" viewBox="0 0 24 24" fill="none">
                            <path d="m6 9 6 6 6-6" stroke="currentColor" stroke-width="2"/>
                        </svg>
                    </button>
                    <div class="profile-dropdown" role="menu">
                        <a href="myProfile.html" class="dropdown-item" role="menuitem">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
                                <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2" stroke="currentColor" stroke-width="2"/>
                                <circle cx="12" cy="7" r="4" stroke="currentColor" stroke-width="2"/>
                            </svg>
                            My Profile
                        </a>
                        <a href="bookingList.html" class="dropdown-item" role="menuitem">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
                                <rect width="18" height="18" x="3" y="4" rx="2" ry="2" stroke="currentColor" stroke-width="2"/>
                                <line x1="16" y1="2" x2="16" y2="6" stroke="currentColor" stroke-width="2"/>
                                <line x1="8" y1="2" x2="8" y2="6" stroke="currentColor" stroke-width="2"/>
                                <line x1="3" y1="10" x2="21" y2="10" stroke="currentColor" stroke-width="2"/>
                            </svg>
                            My Bookings
                        </a>
                        <div class="dropdown-divider"></div>
                        <a href="auth.html#login" class="dropdown-item" role="menuitem">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
                                <path d="M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4" stroke="currentColor" stroke-width="2"/>
                                <polyline points="10,17 15,12 10,7" stroke="currentColor" stroke-width="2"/>
                                <line x1="15" y1="12" x2="3" y2="12" stroke="currentColor" stroke-width="2"/>
                            </svg>
                            Log In
                        </a>
                        <a href="auth.html#signup" class="dropdown-item" role="menuitem">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
                                <path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2" stroke="currentColor" stroke-width="2"/>
                                <circle cx="9" cy="7" r="4" stroke="currentColor" stroke-width="2"/>
                                <line x1="19" y1="8" x2="19" y2="14" stroke="currentColor" stroke-width="2"/>
                                <line x1="22" y1="11" x2="16" y2="11" stroke="currentColor" stroke-width="2"/>
                            </svg>
                            Sign Up
                        </a>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Mobile Navigation Menu -->
        <div class="mobile-nav-menu" id="mobile-nav-menu">
            <div class="mobile-nav-links">
                <a href="index.html" class="nav-link">Home</a>
                <a href="bodyShape.html" class="nav-link active">Body Shape Analysis</a>
                <a href="colorAnalysis.html" class="nav-link">Color Analysis</a>
                <a href="hairTest.html" class="nav-link">Hair Test</a>
                <a href="treatment.html" class="nav-link">Treatments</a>
                <a href="clinic.html" class="nav-link">Clinics</a>
                <a href="bookingList.html" class="nav-link">Bookings</a>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <section class="body-hero">
        <div class="body-hero-content">
            <h1 class="body-hero-title">📏 Body Shape Calculator</h1>
            <p class="body-hero-description">
                The Body Type Calculator is designed for females to find their "body shape," which can be used for getting targeted outfit ideas. Even though there is some research linking certain body shapes with some health risks, the body shape result of this calculator is not intended to be a serious indication of health or an ideal that must be met.
            </p>
        </div>
    </section>

    <!-- Calculator Section -->
    <section class="calculator-section">
        <div class="calculator-card">
            <h2 class="calculator-title">Calculate Your Body Shape</h2>
            <form class="calculator-form" id="body-calculator">
                <input type="number" class="form-input" placeholder="Bust Size (cm)" required />
                <input type="number" class="form-input" placeholder="Waist Size (cm)" required />
                <input type="number" class="form-input" placeholder="High Hip Size (cm)" required />
                <input type="number" class="form-input" placeholder="Hip Size (cm)" required />
                <button type="submit" class="calculate-btn">Calculate Body Shape</button>
                <div id="result-message" class="result-message">
                    <div class="result-content">
                        <div class="result-title" id="result-title"></div>
                        <div class="result-images" id="result-images"></div>
                    </div>
                </div>
            </form>
        </div>

        <div class="calculator-card">
            <div class="instructions-card">
                <h3 class="instructions-title">Measurement Instructions</h3>
                <p class="instructions-text">
                    <strong>When measuring, be sure to stand straight with arms to the side. Make sure the tape is snug against the body, but not too tight such that it compresses the body.</strong><br><br>
                    <strong>Bust Size</strong> - the circumference measured around the chest over the fullest part of the breasts, while wearing a properly fitted bra.<br><br>
                    <strong>Waist Size</strong> - the smallest circumference measured around the natural waist, just above the belly button.<br><br>
                    <strong>High Hip Size</strong> - the circumference of the upper swell of the hip over the pelvic region. It is around 7 inches (18 cm) below the natural waist.<br><br>
                    <strong>Hip Size</strong> - the largest circumference measured around the hips over the largest part of the buttocks.
                </p>
            </div>
        </div>
    </section>

    <!-- Body Shapes Section -->
    <section class="body-shapes-section">
        <h2 class="body-shapes-title">Determine Your Body Shape</h2>
        <p class="body-shapes-subtitle">In the fashion industry, body shapes are often categorized into four classes.</p>

        <!-- Detailed Body Shape Cards -->
        <div class="detailed-shapes-section">
            <h2 class="detailed-shapes-title">Complete Body Shape Guide</h2>

            <div class="detailed-shapes-grid">
                <!-- Hourglass Body Shape Card -->
                <div class="detailed-shape-card animate-on-scroll">
                    <div class="detailed-shape-header">
                        <h3 class="detailed-shape-name">⏳ Hourglass Body Shape</h3>
                        <p class="detailed-shape-summary">The hourglass shape features balanced bust and hips with a defined waist, creating natural curves. Clothing should accentuate the waist while maintaining proportional balance between upper and lower body.</p>
                    </div>
                    <div class="detailed-shape-content">
                        <div class="shape-section">
                            <h4 class="shape-section-title">Suitable Tops</h4>
                            <div class="shape-section-content">
                                <ul class="shape-tips-list">
                                    <li>Fitted styles like wrap tops, belted shirts, or V-neck blouses to highlight the waist</li>
                                    <li>Lightweight knitwear that follows your natural curves</li>
                                    <li>Avoid boxy or overly embellished designs</li>
                                </ul>
                            </div>
                        </div>

                        <div class="shape-section">
                            <h4 class="shape-section-title">Suitable Bottoms</h4>
                            <div class="shape-section-content">
                                <ul class="shape-tips-list">
                                    <li>Bootcut or straight-leg jeans/pants</li>
                                    <li>High-waisted skirts (pencil, A-line, or tulip)</li>
                                    <li>Wide-legged trousers</li>
                                    <li>Steer clear of low-rise or heavily detailed hips</li>
                                </ul>
                            </div>
                        </div>

                        <div class="shape-section">
                            <h4 class="shape-section-title">Suitable Dresses</h4>
                            <div class="shape-section-content">
                                <ul class="shape-tips-list">
                                    <li>Wrap dresses, fitted sheaths, or belted styles that nip at the waist</li>
                                    <li>Full-circle or bias-cut skirts for added volume balance</li>
                                </ul>
                            </div>
                        </div>

                        <div class="shape-highlight">
                            <div class="shape-highlight-title">General Tips</div>
                            <div class="shape-section-content">Do emphasize the waist with belts and fitted cuts; don't add unbalanced volume to shoulders or hips. Best for showcasing curves naturally.</div>
                        </div>
                    </div>
                </div>

                <!-- Rectangle Body Shape Card -->
                <div class="detailed-shape-card animate-on-scroll">
                    <div class="detailed-shape-header">
                        <h3 class="detailed-shape-name">📐 Rectangle Body Shape</h3>
                        <p class="detailed-shape-summary">The rectangle shape has straight lines with little waist definition, resembling a column. Focus on creating curves and waist illusion through volume and details.</p>
                    </div>
                    <div class="detailed-shape-content">
                        <div class="shape-section">
                            <h4 class="shape-section-title">Suitable Tops</h4>
                            <div class="shape-section-content">
                                <ul class="shape-tips-list">
                                    <li>Ruffled or embellished blouses, scoop-neck shirts</li>
                                    <li>Layered styles; belted or nipped-waist designs</li>
                                    <li>Avoid fitted sleeves or boxy cuts</li>
                                </ul>
                            </div>
                        </div>

                        <div class="shape-section">
                            <h4 class="shape-section-title">Suitable Bottoms</h4>
                            <div class="shape-section-content">
                                <ul class="shape-tips-list">
                                    <li>Flared pants like bootcut or wide-leg</li>
                                    <li>Low-rise jeans with pockets/whiskering</li>
                                    <li>A-line or pleated skirts</li>
                                    <li>Steer clear of straight-fitted trousers</li>
                                </ul>
                            </div>
                        </div>

                        <div class="shape-section">
                            <h4 class="shape-section-title">Suitable Dresses</h4>
                            <div class="shape-section-content">
                                <ul class="shape-tips-list">
                                    <li>Belted or asymmetrical dresses</li>
                                    <li>Wrap styles with ruching</li>
                                    <li>Add volume with layers or patterns</li>
                                </ul>
                            </div>
                        </div>

                        <div class="shape-highlight">
                            <div class="shape-highlight-title">General Tips</div>
                            <div class="shape-section-content">Do add volume with ruffles, patterns, and belts; don't wear square necklines or high-rise bottoms that emphasize straightness. Ideal for athletic builds seeking dimension.</div>
                        </div>
                    </div>
                </div>

                <!-- Inverted Triangle Body Shape Card -->
                <div class="detailed-shape-card animate-on-scroll">
                    <div class="detailed-shape-header">
                        <h3 class="detailed-shape-name">🔺 Inverted Triangle Body Shape</h3>
                        <p class="detailed-shape-summary">This shape has broader shoulders/bust and narrower hips. Aim to balance by adding volume below the waist and minimizing the upper body.</p>
                    </div>
                    <div class="detailed-shape-content">
                        <div class="shape-section">
                            <h4 class="shape-section-title">Suitable Tops</h4>
                            <div class="shape-section-content">
                                <ul class="shape-tips-list">
                                    <li>V-neck or scoop blouses, wrap styles in dark colors</li>
                                    <li>Slim-fit knitwear</li>
                                    <li>Avoid shoulder pads or wide necklines</li>
                                </ul>
                            </div>
                        </div>

                        <div class="shape-section">
                            <h4 class="shape-section-title">Suitable Bottoms</h4>
                            <div class="shape-section-content">
                                <ul class="shape-tips-list">
                                    <li>Wide-leg or flared pants</li>
                                    <li>Palazzo trousers with patterns/pockets</li>
                                    <li>Bootcut jeans in light colors</li>
                                    <li>Steer clear of skinny fits</li>
                                </ul>
                            </div>
                        </div>

                        <div class="shape-section">
                            <h4 class="shape-section-title">Suitable Dresses</h4>
                            <div class="shape-section-content">
                                <ul class="shape-tips-list">
                                    <li>Fit-and-flare or A-line dresses that cinch at waist and flare at hips</li>
                                    <li>Asymmetric styles</li>
                                </ul>
                            </div>
                        </div>

                        <div class="shape-highlight">
                            <div class="shape-highlight-title">General Tips</div>
                            <div class="shape-section-content">Do use bright bottoms and flared sleeves; don't add embellishments to shoulders or wear off-shoulder tops. Suited for athletic upper bodies needing lower balance.</div>
                        </div>
                    </div>
                </div>

                <!-- Pear Body Shape Card -->
                <div class="detailed-shape-card animate-on-scroll">
                    <div class="detailed-shape-header">
                        <h3 class="detailed-shape-name">🍐 Pear Body Shape</h3>
                        <p class="detailed-shape-summary">The pear shape features wider hips/thighs and narrower shoulders with a defined waist. Emphasize the upper body to create balance and draw eyes upward.</p>
                    </div>
                    <div class="detailed-shape-content">
                        <div class="shape-section">
                            <h4 class="shape-section-title">Suitable Tops</h4>
                            <div class="shape-section-content">
                                <ul class="shape-tips-list">
                                    <li>Boat-neck or embellished blouses, structured shoulders</li>
                                    <li>Bright/patterned styles; cropped or tucked-in shirts</li>
                                    <li>Avoid boxy or peplum designs</li>
                                </ul>
                            </div>
                        </div>

                        <div class="shape-section">
                            <h4 class="shape-section-title">Suitable Bottoms</h4>
                            <div class="shape-section-content">
                                <ul class="shape-tips-list">
                                    <li>Bootcut or straight-leg pants in dark colors</li>
                                    <li>Mid/high-waisted trousers</li>
                                    <li>A-line skirts knee-length</li>
                                    <li>Steer clear of skinny jeans or embellished pockets</li>
                                </ul>
                            </div>
                        </div>

                        <div class="shape-section">
                            <h4 class="shape-section-title">Suitable Dresses</h4>
                            <div class="shape-section-content">
                                <ul class="shape-tips-list">
                                    <li>A-line or X-line with fitted waists and flowing skirts</li>
                                    <li>Looser fits to skim hips</li>
                                </ul>
                            </div>
                        </div>

                        <div class="shape-highlight">
                            <div class="shape-highlight-title">General Tips</div>
                            <div class="shape-section-content">Do use bold upper details and dark bottoms; don't add volume to hips with ruffles or patterns. Perfect for curvy lower bodies aiming for proportion.</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Info Section -->
        <div class="info-section">
            <h2 class="info-title">What is my body shape?</h2>
            <p class="info-description">
                The female body shapes are based on societal standards that are subjective and are different in different cultures. The algorithm used in this calculator is based on a study published in the International Journal of Clothing Science and Technology, which breaks down the body shapes of women into 7 categories. There are very wide ranges of actual sizes within each shape. Also, some body shapes may not fit into any of the shapes listed below.
            </p>

            <div class="shape-formulas">
                <div class="formula-item">
                    <h4 class="formula-title">Hourglass</h4>
                    <p class="formula-text">If (bust - hips) ≤ 1" AND (hips - bust) < 3.6" AND (bust - waist) ≥ 9" OR (hips - waist) ≥ 10"</p>
                </div>
                
                <div class="formula-item">
                    <h4 class="formula-title">Bottom hourglass</h4>
                    <p class="formula-text">If (hips - bust) ≥ 3.6" AND (hips - bust) < 10" AND (hips - waist) ≥ 9" AND (high hip/waist) < 1.193</p>
                </div>
                
                <div class="formula-item">
                    <h4 class="formula-title">Top hourglass</h4>
                    <p class="formula-text">If (bust - hips) > 1" AND (bust - hips) < 10" AND (bust - waist) ≥ 9"</p>
                </div>
                
                <div class="formula-item">
                    <h4 class="formula-title">Spoon</h4>
                    <p class="formula-text">If (hips - bust) > 2" AND (hips - waist) ≥ 7" AND (high hip/waist) ≥ 1.193</p>
                </div>
                
                <div class="formula-item">
                    <h4 class="formula-title">Triangle</h4>
                    <p class="formula-text">If (hips - bust) ≥ 3.6" AND (hips - waist) < 9"</p>
                </div>
                
                <div class="formula-item">
                    <h4 class="formula-title">Inverted triangle</h4>
                    <p class="formula-text">If (bust - hips) ≥ 3.6" AND (bust - waist) < 9"</p>
                </div>
                
                <div class="formula-item">
                    <h4 class="formula-title">Rectangle</h4>
                    <p class="formula-text">If (hips - bust) < 3.6" AND (bust - hips) < 3.6" AND (bust - waist) < 9" AND (hips - waist) < 10"</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Local styles for highlight and lightbox -->
    <style>
        /* Highlight animation for targeted card */
        @keyframes glowPulse {
            0% { box-shadow: 0 0 0 0 rgba(255,107,157,0.35); }
            70% { box-shadow: 0 0 0 16px rgba(255,107,157,0); }
            100% { box-shadow: 0 0 0 0 rgba(255,107,157,0); }
        }
        .target-highlight {
            border-color: var(--primary);
            animation: glowPulse 1.4s ease-out 2;
        }

        /* Lightbox styles */
        .image-lightbox {
            position: fixed;
            inset: 0;
            background: rgba(0,0,0,0.75);
            display: none;
            align-items: center;
            justify-content: center;
            padding: 24px;
            z-index: 9999;
        }
        .image-lightbox.open { display: flex; }
        .image-lightbox-content {
            position: relative;
            max-width: 92vw;
            max-height: 92vh;
            background: var(--surface);
            border-radius: var(--radius-xl);
            box-shadow: var(--shadow-lg);
            padding: 16px;
        }
        .image-lightbox-img {
            display: block;
            max-width: 86vw;
            max-height: 76vh;
            border-radius: var(--radius-lg);
            object-fit: contain;
            background: var(--surface-hover);
        }
        .image-lightbox-caption {
            margin-top: 8px;
            color: var(--text-secondary);
            font-size: 0.95rem;
            text-align: center;
        }
        .image-lightbox-close {
            position: absolute;
            top: 8px;
            right: 8px;
            width: 36px;
            height: 36px;
            border-radius: var(--radius-full);
            border: 1px solid var(--border);
            background: var(--surface);
            color: var(--text-primary);
            display: inline-flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
        }
        .image-lightbox-close:hover { background: var(--surface-hover); }
    </style>

    <!-- Results Gallery Section (images from "body shapes results") -->
    <section class="results-gallery-section" id="results-gallery" style="max-width:1200px;margin: var(--space-3xl) auto; padding: 0 var(--space-lg);">
        <h2 class="detailed-shapes-title">Body Shape Results Gallery</h2>
        <p class="body-shapes-subtitle">Explore suitable Tops, Bottoms, and Dresses for each body shape.</p>

        <div class="detailed-shapes-grid">
            <!-- Hourglass -->
            <div class="detailed-shape-card" id="result-hourglass">
                <div class="shape-content">
                    <h3 class="shape-title">Hourglass</h3>
                    <p class="shape-description">Balanced bust and hips with a defined waist.</p>
                </div>
                <div class="result-images" style="padding: var(--space-xl);">
                    <div class="result-image-card">
                        <img class="result-image" src="body shapes results/Hourglass/suitable tops.jpg" alt="Hourglass - Suitable Tops" loading="lazy" />
                        <div class="result-image-label">Suitable Tops</div>
                    </div>
                    <div class="result-image-card">
                        <img class="result-image" src="body shapes results/Hourglass/suitable bottoms.jpg" alt="Hourglass - Suitable Bottoms" loading="lazy" />
                        <div class="result-image-label">Suitable Bottoms</div>
                    </div>
                    <div class="result-image-card">
                        <img class="result-image" src="body shapes results/Hourglass/suitable dresses.jpg" alt="Hourglass - Suitable Dresses" loading="lazy" />
                        <div class="result-image-label">Suitable Dresses</div>
                    </div>
                </div>
            </div>

            <!-- Inverted Triangle -->
            <div class="detailed-shape-card" id="result-inverted-triangle">
                <div class="shape-content">
                    <h3 class="shape-title">Inverted Triangle</h3>
                    <p class="shape-description">Broader shoulders/bust and narrower hips.</p>
                </div>
                <div class="result-images" style="padding: var(--space-xl);">
                    <div class="result-image-card">
                        <img class="result-image" src="body shapes results/Inverted triangle/suitable topsit.jpg" alt="Inverted Triangle - Suitable Tops" loading="lazy" />
                        <div class="result-image-label">Suitable Tops</div>
                    </div>
                    <div class="result-image-card">
                        <img class="result-image" src="body shapes results/Inverted triangle/suitable bottomsit.jpg" alt="Inverted Triangle - Suitable Bottoms" loading="lazy" />
                        <div class="result-image-label">Suitable Bottoms</div>
                    </div>
                    <div class="result-image-card">
                        <img class="result-image" src="body shapes results/Inverted triangle/suitable dressesit.jpg" alt="Inverted Triangle - Suitable Dresses" loading="lazy" />
                        <div class="result-image-label">Suitable Dresses</div>
                    </div>
                </div>
            </div>

            <!-- Pear -->
            <div class="detailed-shape-card" id="result-pear">
                <div class="shape-content">
                    <h3 class="shape-title">Pear</h3>
                    <p class="shape-description">Hips wider than bust with a defined waist.</p>
                </div>
                <div class="result-images" style="padding: var(--space-xl);">
                    <div class="result-image-card">
                        <img class="result-image" src="body shapes results/Pear/suitable topsp.jpg" alt="Pear - Suitable Tops" loading="lazy" />
                        <div class="result-image-label">Suitable Tops</div>
                    </div>
                    <div class="result-image-card">
                        <img class="result-image" src="body shapes results/Pear/suitable bottomsp.jpg" alt="Pear - Suitable Bottoms" loading="lazy" />
                        <div class="result-image-label">Suitable Bottoms</div>
                    </div>
                    <div class="result-image-card">
                        <img class="result-image" src="body shapes results/Pear/suitable dressesp.jpg" alt="Pear - Suitable Dresses" loading="lazy" />
                        <div class="result-image-label">Suitable Dresses</div>
                    </div>
                </div>
            </div>

            <!-- Rectangle -->
            <div class="detailed-shape-card" id="result-rectangle">
                <div class="shape-content">
                    <h3 class="shape-title">Rectangle</h3>
                    <p class="shape-description">Bust, waist, and hips with similar measurements.</p>
                </div>
                <div class="result-images" style="padding: var(--space-xl);">
                    <div class="result-image-card">
                        <img class="result-image" src="body shapes results/Rectangle/suitable topsr.jpg" alt="Rectangle - Suitable Tops" loading="lazy" />
                        <div class="result-image-label">Suitable Tops</div>
                    </div>
                    <div class="result-image-card">
                        <img class="result-image" src="body shapes results/Rectangle/suitable bottomsr.jpg" alt="Rectangle - Suitable Bottoms" loading="lazy" />
                        <div class="result-image-label">Suitable Bottoms</div>
                    </div>
                    <div class="result-image-card">
                        <img class="result-image" src="body shapes results/Rectangle/suitable dressesr.jpg" alt="Rectangle - Suitable Dresses" loading="lazy" />
                        <div class="result-image-label">Suitable Dresses</div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Lightbox DOM -->
    <div class="image-lightbox" id="image-lightbox" aria-modal="true" role="dialog">
        <div class="image-lightbox-content">
            <button class="image-lightbox-close" id="image-lightbox-close" aria-label="Close preview">✕</button>
            <img id="image-lightbox-img" class="image-lightbox-img" alt="Preview" />
            <div id="image-lightbox-caption" class="image-lightbox-caption"></div>
        </div>
    </div>

    <!-- Chat Component -->
    <div class="chatbox-icon" role="button" tabindex="0" aria-label="Open chat support">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
            <path d="m3 21 1.9-5.7a8.5 8.5 0 1 1 3.8 3.8z" stroke="currentColor" stroke-width="2"/>
        </svg>
    </div>

    <div id="chatbox" class="chatbox hidden" role="dialog" aria-labelledby="chat-header">
        <div class="chat-header" id="chat-header">
            <div class="chat-header-info">
                <div class="chat-avatar">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
                        <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2" stroke="currentColor" stroke-width="2"/>
                        <circle cx="12" cy="7" r="4" stroke="currentColor" stroke-width="2"/>
                    </svg>
                </div>
                <div>
                    <span class="chat-title">SkinCare Support</span>
                    <span class="chat-status">Online</span>
                </div>
            </div>
            <button id="close-chat" class="chat-close" aria-label="Close chat">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
                    <path d="m18 6-12 12" stroke="currentColor" stroke-width="2"/>
                    <path d="m6 6 12 12" stroke="currentColor" stroke-width="2"/>
                </svg>
            </button>
        </div>
        <div class="chat-body">
            <div class="chat-welcome">
                <p>Hi! How can we help you with body shape analysis today?</p>
            </div>
            <div class="question-list">
                <button class="question">What's the best skincare routine for oily skin?</button>
                <button class="question">Do your products contain parabens?</button>
                <button class="question">Are your products cruelty-free?</button>
                <button class="question">How long does shipping take?</button>
                <button class="question">Can I return a product?</button>
            </div>
            <div id="chat-response" class="chat-response"></div>
        </div>
    </div>

    <!-- JavaScript -->
    <script>
        // Profile dropdown toggle
        const profileBtn = document.querySelector('.profile-btn');
        const profileDropdown = document.querySelector('.profile-dropdown');

        if (profileBtn && profileDropdown) {
            profileBtn.addEventListener('click', function (e) {
                e.preventDefault();
                const isOpen = profileDropdown.classList.contains('dropdown-open');
                if (isOpen) {
                    profileDropdown.classList.remove('dropdown-open');
                    profileBtn.setAttribute('aria-expanded', 'false');
                } else {
                    profileDropdown.classList.add('dropdown-open');
                    profileBtn.setAttribute('aria-expanded', 'true');
                }
            });

            // Close profile dropdown when clicking outside
            document.addEventListener('click', function (e) {
                if (!profileBtn.contains(e.target) && !profileDropdown.contains(e.target)) {
                    profileDropdown.classList.remove('dropdown-open');
                    profileBtn.setAttribute('aria-expanded', 'false');
                }
            });
        }
        // Chat functionality is now handled by chat.js

        // Body shape calculator
        document.getElementById('body-calculator').addEventListener('submit', function (event) {
            event.preventDefault();

            const inputs = document.querySelectorAll('.form-input');
            const bust = parseFloat(inputs[0].value);
            const waist = parseFloat(inputs[1].value);
            const highHip = parseFloat(inputs[2].value);
            const hip = parseFloat(inputs[3].value);

            let result = "";

            // Body shape logic
            if (Math.abs(bust - hip) <= 5 && waist < bust && waist < hip) {
                result = "Hourglass";
            } else if (bust > hip + 5) {
                result = "Inverted Triangle";
            } else if (hip > bust + 5) {
                result = "Pear";
            } else if (waist >= bust * 0.75) {
                result = "Apple";
            } else {
                result = "Rectangle";
            }
            
            console.log('Calculated body shape:', result);

            // Display result with images
            displayBodyShapeResult(result);
        });

        function displayBodyShapeResult(bodyShape) {
            const resultElement = document.getElementById("result-message");
            const resultTitle = document.getElementById("result-title");
            const resultImages = document.getElementById("result-images");

            // Set the title
            resultTitle.textContent = `Your body shape is: ${bodyShape}!`;

            // Clear previous images
            resultImages.innerHTML = '';

            // Map body shape names to image file names and folders
            const imageMap = {
                "Hourglass": {
                    folder: "Hourglass",
                    tops: "suitable tops.jpg",
                    bottoms: "suitable bottoms.jpg",
                    dresses: "suitable dresses.jpg"
                },
                "Inverted Triangle": {
                    folder: "Inverted triangle",
                    tops: "suitable topsit.jpg",
                    bottoms: "suitable bottomsit.jpg",
                    dresses: "suitable dressesit.jpg"
                },
                "Pear": {
                    folder: "Pear",
                    tops: "suitable topsp.jpg",
                    bottoms: "suitable bottomsp.jpg",
                    dresses: "suitable dressesp.jpg"
                },
                "Rectangle": {
                    folder: "Rectangle",
                    tops: "suitable topsr.jpg",
                    bottoms: "suitable bottomsr.jpg",
                    dresses: "suitable dressesr.jpg"
                },
                // Fallback Apple to Rectangle recommendations
                "Apple": {
                    folder: "Rectangle",
                    tops: "suitable topsr.jpg",
                    bottoms: "suitable bottomsr.jpg",
                    dresses: "suitable dressesr.jpg"
                }
            };

            const bodyShapeImages = imageMap[bodyShape] || imageMap["Rectangle"];
            
            // Debug: Log the mapping
            console.log('Body shape:', bodyShape);
            console.log('Selected images:', bodyShapeImages);

            // Image categories to display with correct file names
            const imageCategories = [
                { file: bodyShapeImages.tops, label: "Suitable Tops" },
                { file: bodyShapeImages.bottoms, label: "Suitable Bottoms" },
                { file: bodyShapeImages.dresses, label: "Suitable Dresses" }
            ];

            // Create image cards
            imageCategories.forEach(category => {
                const imageCard = document.createElement('div');
                imageCard.className = 'result-image-card';

                // Create loading placeholder
                const loadingDiv = document.createElement('div');
                loadingDiv.className = 'result-loading';
                loadingDiv.textContent = 'Loading...';

                const img = document.createElement('img');
                img.className = 'result-image';
                img.src = 'body shapes results/' + (imageMap[bodyShape].folder || 'Rectangle') + '/' + category.file;
                img.alt = `${bodyShape} - ${category.label}`;
                img.loading = 'lazy';
                img.style.display = 'none'; // Hide initially

                // Debug: Log the image path to console
                console.log('Loading image:', img.src);

                // Add timeout for loading state (10 seconds)
                const loadingTimeout = setTimeout(() => {
                    if (loadingDiv.style.display !== 'none') {
                        console.warn('Image loading timeout:', img.src);
                        img.onerror(); // Trigger error handler
                    }
                }, 10000);

                // Add load handler
                img.onload = function() {
                    console.log('Image loaded successfully:', this.src);
                    clearTimeout(loadingTimeout);
                    loadingDiv.style.display = 'none';
                    this.style.display = 'block';
                };

                // Add error handling for missing images
                img.onerror = function() {
                    console.error('Failed to load image:', this.src);
                    clearTimeout(loadingTimeout);
                    loadingDiv.style.display = 'none';
                    
                    const errorMsg = document.createElement('div');
                    errorMsg.className = 'result-image-error';
                    errorMsg.innerHTML = `
                        <div style="text-align: center;">
                            <svg width="48" height="48" viewBox="0 0 24 24" fill="none" style="margin-bottom: 8px; opacity: 0.5;">
                                <path d="M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2zM8.5 13.5l2.5 3.01L14.5 12l4.5 6H5l3.5-4.5z" fill="currentColor"/>
                            </svg>
                            <div>Image not available</div>
                            <div style="font-size: 0.8rem; margin-top: 4px;">Path: ${this.src}</div>
                            <div style="font-size: 0.8rem; margin-top: 4px;">Body Shape: ${bodyShape}</div>
                        </div>
                    `;
                    imageCard.appendChild(errorMsg);
                };

                const label = document.createElement('div');
                label.className = 'result-image-label';
                label.textContent = category.label;

                imageCard.appendChild(loadingDiv);
                imageCard.appendChild(img);
                imageCard.appendChild(label);
                resultImages.appendChild(imageCard);
            });

            // Show the result with animation
            resultElement.classList.add('show');

            // Add notification for body shape analysis completion
            if (typeof addNotification === 'function') {
                addNotification(
                    'success',
                    'Body Shape Analysis Complete!',
                    `Your body shape is ${bodyShape}! Check out your personalized style recommendations below.`
                );
            }

            // Redirect/scroll to the corresponding gallery card for this body shape
            const redirectMap = {
                'Hourglass': 'result-hourglass',
                'Inverted Triangle': 'result-inverted-triangle',
                'Pear': 'result-pear',
                'Rectangle': 'result-rectangle',
                'Apple': 'result-rectangle' // fallback mapping
            };
            const targetId = redirectMap[bodyShape] || 'result-rectangle';
            const targetEl = document.getElementById(targetId);
            if (targetEl) {
                // Smooth scroll to gallery and then to the specific card
                const gallery = document.getElementById('results-gallery');
                if (gallery) {
                    gallery.scrollIntoView({ behavior: 'smooth' });
                    setTimeout(() => targetEl.scrollIntoView({ behavior: 'smooth', block: 'start' }), 300);
                } else {
                    targetEl.scrollIntoView({ behavior: 'smooth', block: 'start' });
                }

                // Briefly highlight the target card
                targetEl.classList.add('target-highlight');
                setTimeout(() => targetEl.classList.remove('target-highlight'), 2200);

                // Update URL hash without adding to history stack
                if (history.replaceState) {
                    history.replaceState(null, '', '#' + targetId);
                } else {
                    window.location.hash = targetId;
                }
            }
        }

        // Enable click-to-view (lightbox) on gallery and result images
        function setupImageLightbox() {
            const lightbox = document.getElementById('image-lightbox');
            const lightboxImg = document.getElementById('image-lightbox-img');
            const lightboxCaption = document.getElementById('image-lightbox-caption');
            const lightboxClose = document.getElementById('image-lightbox-close');
            if (!lightbox || !lightboxImg || !lightboxClose) return;

            const open = (src, caption) => {
                lightboxImg.src = src;
                lightboxCaption.textContent = caption || '';
                lightbox.classList.add('open');
                document.body.style.overflow = 'hidden';
            };
            const close = () => {
                lightbox.classList.remove('open');
                lightboxImg.src = '';
                lightboxCaption.textContent = '';
                document.body.style.overflow = '';
            };

            // Click on any .result-image or .shape-image inside results gallery to open
            document.addEventListener('click', (e) => {
                const img = e.target.closest('img.result-image, img.shape-image');
                if (!img) return;
                const card = img.closest('.detailed-shape-card, .result-image-card');
                const cardTitle = card?.querySelector('.shape-title')?.textContent?.trim();
                const label = card?.querySelector('.result-image-label')?.textContent?.trim();
                const caption = [cardTitle, label].filter(Boolean).join(' — ');
                open(img.src, caption);
            });

            // Close actions
            lightboxClose.addEventListener('click', close);
            lightbox.addEventListener('click', (e) => { if (e.target === lightbox) close(); });
            document.addEventListener('keydown', (e) => { if (e.key === 'Escape' && lightbox.classList.contains('open')) close(); });
        }
        setupImageLightbox();

        // Mobile Navigation Toggle
        const mobileNavToggle = document.querySelector('.mobile-nav-toggle');
        const mobileNavMenu = document.getElementById('mobile-nav-menu');
        
        if (mobileNavToggle && mobileNavMenu) {
            mobileNavToggle.addEventListener('click', function() {
                mobileNavMenu.classList.toggle('show');
            });
            
            // Close mobile menu when clicking outside
            document.addEventListener('click', function(e) {
                if (!mobileNavToggle.contains(e.target) && !mobileNavMenu.contains(e.target)) {
                    mobileNavMenu.classList.remove('show');
                }
            });
        }
        
        // Notification system is handled by notification-functions.js
        


        // Scroll animations
        const observerOptions = {
            threshold: 0.1,
            rootMargin: '0px 0px -50px 0px'
        };

        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('animate-in');
                }
            });
        }, observerOptions);

        document.querySelectorAll('.animate-on-scroll').forEach(el => {
            observer.observe(el);
        });
    </script>

    <!-- Chat Module -->
    <script src="chat.js"></script>
    
    <!-- Include Notification System -->
    <script src="notification-functions.js"></script>

    <!-- TypeScript Modules -->
    <script type="module" src="app.js"></script>
</body>
</html>